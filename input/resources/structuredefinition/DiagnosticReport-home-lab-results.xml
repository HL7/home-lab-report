<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition
    xmlns="http://hl7.org/fhir">
    <id value="DiagnosticReport-home-lab-results"/>
    <meta>
        <versionId value="18"/>
        <lastUpdated value="2022-04-21T05:56:05.423+00:00"/>
        <source value="#TtD6q8maVIrtSh8U"/>
    </meta>
    <url value="http://hl7.org/fhir/us/home-lab-report/StructureDefinition/DiagnosticReport-home-lab-results"/>
    <version value="1.0.0"/>
    <name value="DiagnosticReportHomeLabResult"/>
    <title value="DiagnosticReport - Home Lab Results"/>
    <status value="active"/>
    <publisher value="Orders &amp; Observations (http://www.hl7.org/Special/committees/orders/index.cfm)"/>
    <description value="This profile constrains the US Core Diagnostic Report for Laboratory Results profile to At-Home Sample Tests."/>
    <fhirVersion value="4.0.1"/>
    <kind value="resource"/>
    <abstract value="false"/>
    <type value="DiagnosticReport"/>
    <baseDefinition value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-diagnosticreport-lab"/>
    <derivation value="constraint"/>
    <differential>
        <element id="DiagnosticReport">
            <path value="DiagnosticReport"/>
        </element>
        <element id="DiagnosticReport.id">
            <path value="DiagnosticReport.id"/>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.meta">
            <path value="DiagnosticReport.meta"/>
            <short value="The Meta.source SHALL replicate and hold the App ID. It is known that App IDs are typically managed and housed in the App Launch. Care will need to be taken so that these IDs match"/>
            <min value="1"/>
            <max value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.meta.id">
            <path value="DiagnosticReport.meta.id"/>
            <short value="App ID will likely be combination of ID + versionID"/>
            <min value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.meta.versionId">
            <path value="DiagnosticReport.meta.versionId"/>
            <short value="App ID will likely be combination of ID + versionID"/>
            <min value="1"/>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.extension">
            <path value="DiagnosticReport.extension"/>
            <slicing>
                <discriminator>
                    <type value="value"/>
                    <path value="url"/>
                </discriminator>
                <discriminator>
                    <type value="value"/>
                    <path value="valueReference.reference"/>
                </discriminator>
                <rules value="open"/>
            </slicing>
            <min value="0"/>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.extension:supportingInformationSymptomPresence">
            <path value="DiagnosticReport.extension"/>
            <sliceName value="supportingInformationSymptomPresence"/>
            <short value="The supportingInformation Extension will house answers the patient supplied to questions asked by the At Home App"/>
            <min value="1"/>
            <max value="1"/>
            <type>
                <code value="Extension"/>
                <profile value="http://hl7.org/fhir/StructureDefinition/workflow-supportingInfo"/>
            </type>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.extension:supportingInformationSymptomPresence.value[x]">
            <path value="DiagnosticReport.extension.value[x]"/>
            <min value="1"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/home-lab-report/StructureDefinition/Observation-condition-related-symptoms-present"/>
            </type>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.extension:supportingInformationSymptomOnset">
            <path value="DiagnosticReport.extension"/>
            <sliceName value="supportingInformationSymptomOnset"/>
            <min value="1"/>
            <max value="1"/>
            <type>
                <code value="Extension"/>
                <profile value="http://hl7.org/fhir/StructureDefinition/workflow-supportingInfo"/>
            </type>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.extension:supportingInformationSymptomOnset.value[x]">
            <path value="DiagnosticReport.extension.value[x]"/>
            <min value="1"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/home-lab-report/StructureDefinition/Observation-date-time-symptom-onset"/>
            </type>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.identifier">
            <path value="DiagnosticReport.identifier"/>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.status">
            <path value="DiagnosticReport.status"/>
            <type>
                <code value="code"/>
            </type>
            <fixedCode value="final"/>
        </element>
        <element id="DiagnosticReport.code">
            <path value="DiagnosticReport.code"/>
            <mustSupport value="true"/>
        </element>
        <element id="DiagnosticReport.effective[x]">
            <path value="DiagnosticReport.effective[x]"/>
            <type>
                <code value="dateTime"/>
            </type>
            <constraint>
                <key value="aht-1"/>
                <severity value="warning"/>
                <human value="The effectiveTime SHALL be precise to at least the minute and SHALL include a time zone offset. For example YYYY-MM-DDTHH:mm+/-HH:NN"/>
                <expression value="Observation.effectiveDateTime.exists() implies Observation.effectiveDateTime.toString().length() &gt;= 25"/>
            </constraint>
        </element>
        <element id="DiagnosticReport.result">
            <path value="DiagnosticReport.result"/>
            <min value="1"/>
            <max value="1"/>
            <type>
                <code value="Reference"/>
                <targetProfile value="http://hl7.org/fhir/us/home-lab-report/StructureDefinition/Observation-home-lab-test-result"/>
            </type>
            <mustSupport value="true"/>
            <binding>
                <strength value="required"/>
            </binding>
        </element>
    </differential>
</StructureDefinition>