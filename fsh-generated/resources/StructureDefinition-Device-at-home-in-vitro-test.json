{
  "resourceType": "StructureDefinition",
  "id": "Device-at-home-in-vitro-test",
  "url": "http://hl7.org/fhir/us/home-lab-report/StructureDefinition/Device-at-home-in-vitro-test",
  "version": "1.0.0",
  "name": "DeviceAtHomeInVitroTest",
  "title": "Device - At-Home In-Vitro Test",
  "status": "active",
  "description": "This profile constrains the Device resource for At-Home In-Vitro Tests.",
  "fhirVersion": "4.0.1",
  "mapping": [
    {
      "identity": "rim",
      "uri": "http://hl7.org/v3",
      "name": "RIM Mapping"
    },
    {
      "identity": "w5",
      "uri": "http://hl7.org/fhir/fivews",
      "name": "FiveWs Pattern Mapping"
    },
    {
      "identity": "udi",
      "uri": "http://fda.gov/UDI",
      "name": "UDI Mapping"
    },
    {
      "identity": "livd",
      "name": "LIVD Spreadsheet",
      "uri": "https://www.cdc.gov/csels/dls/sars-cov-2-livd-codes.html"
    }
  ],
  "kind": "resource",
  "abstract": false,
  "type": "Device",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Device",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Device.udiCarrier",
        "path": "Device.udiCarrier",
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Device.udiCarrier.deviceIdentifier",
        "path": "Device.udiCarrier.deviceIdentifier",
        "short": "LIVD Spreadsheet | LOINC Mapping.Testkit Name ID or LIVD Spreadsheet | LOINC Mapping.Testkit Equipment UID",
        "definition": "Although most at home test kits will have a single UDI for the \"test kit\" (all in one package of reagents, test card/device, etc.) it is possible for at home kits have a resuable \"reader device\" which would need a distinct \"equipment id\". In this case, the reader device would have an \"equipment UID\" that may be the same for multiple tests performed. For these cases record Equipment UID here, otherwise record Test Kit Name ID here.",
        "min": 1,
        "mustSupport": true,
        "mapping": [
          {
            "identity": "livd",
            "map": "LOINC Mapping.Testkit Name ID"
          },
          {
            "identity": "livd",
            "map": "LOINC Mapping.Equipment UID"
          }
        ]
      },
      {
        "id": "Device.udiCarrier.issuer",
        "path": "Device.udiCarrier.issuer",
        "mustSupport": true
      },
      {
        "id": "Device.manufacturer",
        "path": "Device.manufacturer",
        "short": "LIVD Spreadsheet | LOINC Mapping.Manufacturer",
        "mustSupport": true,
        "mapping": [
          {
            "identity": "livd",
            "map": "LOINC Mapping.Manufacturer"
          }
        ]
      },
      {
        "id": "Device.manufactureDate",
        "path": "Device.manufactureDate",
        "mustSupport": true
      },
      {
        "id": "Device.expirationDate",
        "path": "Device.expirationDate",
        "short": "Expiration date of the test kit",
        "mustSupport": true
      },
      {
        "id": "Device.lotNumber",
        "path": "Device.lotNumber",
        "short": "Lot number of the test kit",
        "mustSupport": true
      },
      {
        "id": "Device.serialNumber",
        "path": "Device.serialNumber",
        "short": "Serial number of the test kit",
        "mustSupport": true
      },
      {
        "id": "Device.deviceName",
        "path": "Device.deviceName",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "type"
            }
          ],
          "rules": "open"
        },
        "min": 1
      },
      {
        "id": "Device.deviceName:modelName",
        "path": "Device.deviceName",
        "sliceName": "modelName",
        "short": "LIVD Spreadsheet | LOINC Mapping.Model",
        "min": 1,
        "max": "1",
        "mapping": [
          {
            "identity": "livd",
            "map": "LOINC Mapping.Model"
          }
        ]
      },
      {
        "id": "Device.deviceName:modelName.name",
        "path": "Device.deviceName.name",
        "mustSupport": true
      },
      {
        "id": "Device.deviceName:modelName.type",
        "path": "Device.deviceName.type",
        "fixedCode": "model-name"
      }
    ]
  }
}
